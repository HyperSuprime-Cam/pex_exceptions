# -*- python -*-
Import("env")

env.CheckSwig("python", ilang="c++",includedProducts="pex_exceptions")

env.Program("Exception_1.cc", LIBS=env.getlibs("pex_exceptions"))
failerLib = env.LoadableModuleIncomplete("_failer", ["Failer.i", "Failer.cc"], LIBS=env.getlibs("pex_exceptions"))

#
# Tests
#
import lsst.tests
import os

tests = lsst.tests.Control(env, verbose=True)

tests.run("Exception_1.cc")
for target in tests.run("Exception_*.py"):
    env.Depends(target, failerLib)
    env.Depends(target, "../python/lsst/pex/exceptions/_exceptionsLib.so")
